<?xml version="1.0" encoding="UTF-8" ?>
<!--
  ~ Licensed to the Apache Software Foundation (ASF) under one or more
  ~ contributor license agreements.  See the NOTICE file distributed with
  ~ this work for additional information regarding copyright ownership.
  ~ The ASF licenses this file to You under the Apache License, Version 2.0
  ~ (the "License"); you may not use this file except in compliance with
  ~ the License.  You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.apache.dolphinscheduler.dao.mapper.ProcessDependentMapper">
    
    <insert id="insertBatch" parameterType="java.util.List">
        insert into t_ds_process_dependent
        (dependent_id, process_id, create_time, update_time)
        values
        <foreach collection="processDependents" item="processDependent" separator=",">
            (#{processDependent.dependentId}, #{processDependent.processId}, #{processDependent.createTime}, #{processDependent.updateTime})
        </foreach>
    </insert>
    <delete id="deleteByProcessId">
        delete
        from t_ds_process_dependent
        where process_id=#{processId}
    </delete>
    <select id="queryByProcessId" resultType="org.apache.dolphinscheduler.dao.entity.ProcessDependent">
        SELECT id, dependent_id, process_id, create_time, update_time
        FROM t_ds_process_dependent
        WHERE process_id = #{processId}
    </select>
    <select id="queryByDependentId" resultType="org.apache.dolphinscheduler.dao.entity.ProcessDependent">
        SELECT id, dependent_id, process_id, create_time, update_time
        FROM t_ds_process_dependent
        WHERE dependent_id = #{dependentId}
    </select>
    <select id="queryOneDataByDependentId" resultType="org.apache.dolphinscheduler.dao.entity.ProcessDependent">
        SELECT id, dependent_id, process_id, create_time, update_time
        FROM t_ds_process_dependent
        WHERE dependent_id = #{dependentId} limit 1
    </select>
    <select id="queryByDependentIdListPaging" resultType="org.apache.dolphinscheduler.dao.entity.ProcessDependent">
        select id, dependent_id, process_id, create_time, update_time
        from t_ds_process_dependent
        where dependent_id = #{dependentId}
        order by process_id asc
    </select>
    <select id="queryByProcessIdListPaging" resultType="org.apache.dolphinscheduler.dao.entity.ProcessDependent">
        select id, dependent_id, process_id, create_time, update_time
        from t_ds_process_dependent
        where process_id = #{processId}
        order by dependent_id asc
    </select>
</mapper>